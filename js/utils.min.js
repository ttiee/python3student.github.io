const btf={debounce:function(func,wait,immediate){let timeout;return function(){const context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}},throttle:function(func,wait,options){let timeout,context,args,previous=0;options||(options={});const later=function(){previous=!1===options.leading?0:(new Date).getTime(),timeout=null,func.apply(context,args),timeout||(context=args=null)},throttled=function(){const now=(new Date).getTime();previous||!1!==options.leading||(previous=now);const remaining=wait-(now-previous);context=this,args=arguments,remaining<=0||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,func.apply(context,args),timeout||(context=args=null)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining))};return throttled},sidebarPaddingR:()=>{const innerWidth=window.innerWidth,clientWidth=document.body.clientWidth,paddingRight=innerWidth-clientWidth;innerWidth!==clientWidth&&(document.body.style.paddingRight=paddingRight+"px")},snackbarShow:(text,showAction=!1,duration=2e3)=>{const{position:position,bgLight:bgLight,bgDark:bgDark}=GLOBAL_CONFIG.Snackbar,bg="light"===document.documentElement.getAttribute("data-theme")?bgLight:bgDark;Snackbar.show({text:text,backgroundColor:bg,showAction:showAction,duration:duration,pos:position,customClass:"snackbar-css"})},diffDate:(d,more=!1)=>{const dateNow=new Date,datePost=new Date(d),dateDiff=dateNow.getTime()-datePost.getTime(),minute=6e4,hour=36e5,day=864e5,month=2592e6;let result;if(more){const monthCount=dateDiff/month,dayCount=dateDiff/day,hourCount=dateDiff/36e5,minuteCount=dateDiff/6e4;result=monthCount>12?datePost.toLocaleDateString().replace(/\//g,"-"):monthCount>=1?parseInt(monthCount)+" "+GLOBAL_CONFIG.date_suffix.month:dayCount>=1?parseInt(dayCount)+" "+GLOBAL_CONFIG.date_suffix.day:hourCount>=1?parseInt(hourCount)+" "+GLOBAL_CONFIG.date_suffix.hour:minuteCount>=1?parseInt(minuteCount)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else result=parseInt(dateDiff/day);return result},loadComment:(dom,callback)=>{if("IntersectionObserver"in window){const observerItem=new IntersectionObserver(entries=>{entries[0].isIntersecting&&(callback(),observerItem.disconnect())},{threshold:[0]});observerItem.observe(dom)}else callback()},scrollToDest:(pos,time=500)=>{const currentPos=window.pageYOffset;if(currentPos>pos&&(pos-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:pos,behavior:"smooth"});let start=null;pos=+pos,window.requestAnimationFrame((function step(currentTime){start=start||currentTime;const progress=currentTime-start;currentPos<pos?window.scrollTo(0,(pos-currentPos)*progress/time+currentPos):window.scrollTo(0,currentPos-(currentPos-pos)*progress/time),progress<time?window.requestAnimationFrame(step):window.scrollTo(0,pos)}))},animateIn:(ele,text)=>{ele.style.display="block",ele.style.animation=text},animateOut:(ele,text)=>{ele.addEventListener("animationend",(function f(){ele.style.display="",ele.style.animation="",ele.removeEventListener("animationend",f)})),ele.style.animation=text},getParents:(elem,selector)=>{for(;elem&&elem!==document;elem=elem.parentNode)if(elem.matches(selector))return elem;return null},siblings:(ele,selector)=>[...ele.parentNode.children].filter(child=>selector?child!==ele&&child.matches(selector):child!==ele),wrap:(selector,eleType,options)=>{const creatEle=document.createElement(eleType);for(const[key,value]of Object.entries(options))creatEle.setAttribute(key,value);selector.parentNode.insertBefore(creatEle,selector),creatEle.appendChild(selector)},unwrap:el=>{const elParentNode=el.parentNode;elParentNode!==document.body&&(elParentNode.parentNode.insertBefore(el,elParentNode),elParentNode.parentNode.removeChild(elParentNode))},isHidden:ele=>0===ele.offsetHeight&&0===ele.offsetWidth,getEleTop:ele=>{let actualTop=ele.offsetTop,current=ele.offsetParent;for(;null!==current;)actualTop+=current.offsetTop,current=current.offsetParent;return actualTop},loadLightbox:ele=>{const service=GLOBAL_CONFIG.lightbox;if("mediumZoom"===service){const zoom=mediumZoom(ele);zoom.on("open",e=>{const photoBg="dark"===document.documentElement.getAttribute("data-theme")?"#121212":"#fff";zoom.update({background:photoBg})})}"fancybox"===service&&(ele.forEach(i=>{if("A"!==i.parentNode.tagName){const dataSrc=i.dataset.lazySrc||i.src,dataCaption=i.title||i.alt||"";btf.wrap(i,"a",{href:dataSrc,"data-fancybox":"gallery","data-caption":dataCaption,"data-thumb":dataSrc})}}),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1}}),window.fancyboxRun=!0))},initJustifiedGallery:function(selector){selector.forEach((function(i){btf.isHidden(i)||fjGallery(i,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:anchor=>{if(anchor!==window.location.hash){anchor||(anchor=location.pathname);const title=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:title},title,anchor)}}};